---
layout: page
permalink: /blogs/optimalstopping/index.html
title: Optimal Stopping
---

## 【无限流浅谈】从《迷域行者》到双臂赌博机

最近在B站刷到一档神奇的综艺节目——《十天之后回归现实》，该节目的安排基本照搬自日本智斗/无限流漫画《弥留之国的爱丽丝》，大概是一群人被投放到一个“异世界”中，需要完成各种各样的游戏来获取“签证”（在异世界中的生存时间）。其中的一个游戏来自一部被尘封的国产无限流漫画——《迷域行者》，我们现在来聊聊这个游戏中有趣的设定和可能的解法。

#### 问题描述
玩家面前有一列苹果，每个苹果的质量是$m_i$。玩家只能依次看到第$i=1,2,3,\cdots,n$个苹果的重量。在玩家获知第$i$苹果的重量后，玩家可以选择拿取这个苹果，或者继续向前走；玩家一旦获知第$i$个苹果的重量，就不能拿取编号小于$i$的苹果。每个玩家在拿取两个苹果后游戏结束，两个苹果中质量最大的那个是玩家的最终得分。

### “最优停止”问题的定义

上面的“取苹果”问题是可以被归类到最优停止问题中，这里我们先给出最优停止问题的定义：


我们有一列随机变量$\{X_i\}$和一列函数$\{y_i\}$。你可以在随机变量序列 $X_1,X_2,\cdots,X_n$ 中观测任意长度的序列，在观测到$X_i = x_i$后，你可以选择继续向下观测$X_{i+1}$，也可以选择停止以获得奖励$y_i = y(x_1,x_2,\cdots,x_i)$。记观测到$X_i$后选择停止的概率为$\phi_i$，停在第$i$步的概率为$\psi_i$，则$\psi_0 = \phi_0$，$\psi_1 = (1 - \phi_0) \cdot \phi_1$，等等。我们的目标是合理地选择$\phi_i$，以最大化收益期望$R(\phi)  = \mathbb{E} (\sum_i \psi_i y_i)$。换言之，一个更简单的定义是：我们有离散随机过程$\{Y_i\}$，$\mathcal{F}_i$是由$Y_1,Y_2,\cdots,Y_i$定义的滤流。我们说随机变量$T$是一个停时，如果事件$\{T \le i\}$是$\mathcal{F}_i$可测的。我们要找到一个停时$N$，最大化$R = \mathbb{E}(Y_N)$。



### 经典最优停止问题：离散有限视野的情况

如果问题中的随机变量序列是有限的，我们就称问题是Finite Horizon（如同最优控制中一样）。

#### 一般的套路：逆向归纳法


#### 经典秘书问题



#### 效用单调的秘书问题



#### 停车场问题



### 从最优停止到强化学习：双臂赌博机的研究


